---
- name: Install add-apt-repostory
  apt:
    name: software-properties-common
    state: latest
  become: true

- name: Add Oracle Java Repository
  apt_repository:
    repo: ppa:webupd8team/java
  become: true

- name: Accept Java 8 License
  debconf:
    name: oracle-java8-installer
    question: shared/accepted-oracle-license-v1-1
    value: true
    vtype: select
  become: true

- name: Purge Oracle Java 8 installer
  apt:
    name: oracle-java8-installer
    state: absent
  become: true

- name: Install Oracle Java 8 installer
  apt:
    # name: oracle-java8-installer
    deb: http://debian.opennms.org/dists/opennms-23/main/binary-all/oracle-java8-installer_8u131-1~webupd8~2_all.deb
    state: present
  become: true

- name: Install Oracle Java 8 certificates
  apt:
    name: ca-certificates
    state: latest
  become: true

- name: Install Oracle Java 8
  apt:
    # name: oracle-java8-set-default
    deb: http://debian.opennms.org/dists/opennms-23/main/binary-all/oracle-java8-set-default_8u131-1~webupd8~2_all.deb
    state: present
  become: true

  # apt:
  #   name:
  #     - oracle-java8-set-default
  #   state: latest
  # become: true
# - name: Install Oracle Java 8
#   unarchive:
#     src: https://javadl.oracle.com/webapps/download/AutoDL?BundleId=238719_478a62b7d4e34b78b671c754eaaf38ab
#     dest: /usr/lib/jvm/java-8-oracle
#     remote_src: yes
#   become: true
